---
layout: post
title: Week-8
date: 2019-07-15
---	

**Goals of the week**

* Rosification of camViz tool

* Adding support of ROS2 in newer camViz tool

**Progress**

Basically I have to use previously build Subscriber camera-interface with a  C++ based GUI!!!

1. GTK 2.0 and GTK 3.0 mix up issue : old Status - Solved

This problem came again.

```
pankhuri@pankhuri-LENOVO-IDEAPAD-500-15ISK:~/week8-camviz/build$ cmake ..
THIS IS ROS1
ROS1 found
-- Configuring done
-- Generating done
-- Build files have been written to: /home/pankhuri/week8-camviz/build
pankhuri@pankhuri-LENOVO-IDEAPAD-500-15ISK:~/week8-camviz/build$ make -j 4
Scanning dependencies of target camViz
[ 33%] Building CXX object CMakeFiles/camViz.dir/camViz.cpp.o
[ 66%] Building CXX object CMakeFiles/camViz.dir/viewer.cpp.o
In file included from /opt/jderobot/include/jderobot/visionlib/colorspaces/colorspacesmm.h:25:0,
                 from /home/pankhuri/week8-camviz/viewer.h:29,
                 from /home/pankhuri/week8-camviz/viewer.cpp:22:
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:123:38: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     Image& convert(Image& dst) const throw(NoConversion);
                                      ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:162:36: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     void toGRAY8(Image& dst) const throw(FormatMismatch);
                                    ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:163:35: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     void toYUY2(Image& dst) const throw(FormatMismatch);
                                   ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:164:35: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     void toHSV8(Image& dst) const throw(FormatMismatch);
                                   ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:165:36: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     void toYCRCB(Image& dst) const throw(FormatMismatch);
                                    ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:184:58: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     static Image& imageCvt(const Image& src, Image& dst) throw(NoConversion);
                                                          ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:216:36: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     void toGRAY8(Image& dst) const throw(FormatMismatch);
                                    ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:217:35: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     void toRGB8(Image& dst) const throw(FormatMismatch);
                                   ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:218:36: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     void toYCRCB(Image& dst) const throw(FormatMismatch);
                                    ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:224:58: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     static Image& imageCvt(const Image& src, Image& dst) throw(NoConversion);
                                                          ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:255:35: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     void toRGB8(Image& dst) const throw(FormatMismatch);
                                   ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:256:35: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     void toYUY2(Image& dst) const throw(FormatMismatch);
                                   ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:274:58: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     static Image& imageCvt(const Image& src, Image& dst) throw(NoConversion);
                                                          ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:304:35: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     void toRGB8(Image& dst) const throw(FormatMismatch);
                                   ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:310:58: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     static Image& imageCvt(const Image& src, Image& dst) throw(NoConversion);
                                                          ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:340:35: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     void toRGB8(Image& dst) const throw(FormatMismatch);
                                   ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:347:58: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     static Image& imageCvt(const Image& src, Image& dst) throw(NoConversion);
                                                          ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:379:36: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     void toGRAY8(Image& dst) const throw(FormatMismatch);
                                    ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:380:35: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     void toRGB8(Image& dst) const throw(FormatMismatch);
                                   ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:381:36: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     void toYCRCB(Image& dst) const throw(FormatMismatch);
                                    ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:387:58: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     static Image& imageCvt(const Image& src, Image& dst) throw(NoConversion);
                                                          ^~~~~
In file included from /opt/jderobot/include/jderobot/visionlib/colorspaces/colorspacesmm.h:25:0,
                 from /home/pankhuri/week8-camviz/camViz.cpp:27:
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:123:38: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     Image& convert(Image& dst) const throw(NoConversion);
                                      ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:162:36: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     void toGRAY8(Image& dst) const throw(FormatMismatch);
                                    ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:163:35: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     void toYUY2(Image& dst) const throw(FormatMismatch);
                                   ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:164:35: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     void toHSV8(Image& dst) const throw(FormatMismatch);
                                   ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:165:36: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     void toYCRCB(Image& dst) const throw(FormatMismatch);
                                    ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:184:58: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     static Image& imageCvt(const Image& src, Image& dst) throw(NoConversion);
                                                          ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:216:36: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     void toGRAY8(Image& dst) const throw(FormatMismatch);
                                    ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:217:35: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     void toRGB8(Image& dst) const throw(FormatMismatch);
                                   ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:218:36: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     void toYCRCB(Image& dst) const throw(FormatMismatch);
                                    ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:224:58: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     static Image& imageCvt(const Image& src, Image& dst) throw(NoConversion);
                                                          ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:255:35: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     void toRGB8(Image& dst) const throw(FormatMismatch);
                                   ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:256:35: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     void toYUY2(Image& dst) const throw(FormatMismatch);
                                   ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:274:58: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     static Image& imageCvt(const Image& src, Image& dst) throw(NoConversion);
                                                          ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:304:35: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     void toRGB8(Image& dst) const throw(FormatMismatch);
                                   ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:310:58: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     static Image& imageCvt(const Image& src, Image& dst) throw(NoConversion);
                                                          ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:340:35: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     void toRGB8(Image& dst) const throw(FormatMismatch);
                                   ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:347:58: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     static Image& imageCvt(const Image& src, Image& dst) throw(NoConversion);
                                                          ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:379:36: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     void toGRAY8(Image& dst) const throw(FormatMismatch);
                                    ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:380:35: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     void toRGB8(Image& dst) const throw(FormatMismatch);
                                   ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:381:36: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     void toYCRCB(Image& dst) const throw(FormatMismatch);
                                    ^~~~~
/opt/jderobot/include/jderobot/visionlib/colorspaces/imagecv.h:387:58: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
     static Image& imageCvt(const Image& src, Image& dst) throw(NoConversion);
                                                          ^~~~~
/home/pankhuri/week8-camviz/camViz.cpp: In function ‘int main(int, char**)’:
/home/pankhuri/week8-camviz/camViz.cpp:47:13: warning: unused variable ‘fps’ [-Wunused-variable]
         int fps = config["Fps"].as<int>();
             ^~~
/home/pankhuri/week8-camviz/camViz.cpp:52:24: warning: variable ‘camRGB’ set but not used [-Wunused-but-set-variable]
  camViz::CameraClient* camRGB;
                        ^~~~~~
/home/pankhuri/week8-camviz/camViz.cpp:37:14: warning: unused parameter ‘argc’ [-Wunused-parameter]
 int main(int argc, char** argv){
              ^~~~
In file included from /home/pankhuri/week8-camviz/camViz.cpp:29:0:
/home/pankhuri/week8-camviz/mainsubcpp.hpp: In function ‘camViz::CameraClient* camViz::getCameraClient(int, std::__cxx11::string)’:
/home/pankhuri/week8-camviz/mainsubcpp.hpp:69:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
[100%] Linking CXX executable camViz
[100%] Built target camViz
pankhuri@pankhuri-LENOVO-IDEAPAD-500-15ISK:~/week8-camviz/build$ cd ..
pankhuri@pankhuri-LENOVO-IDEAPAD-500-15ISK:~/week8-camviz$ ./build/camViz camViz.yml

(camViz:5744): Gtk-ERROR **: 10:07:26.986: GTK+ 2.x symbols detected. Using GTK+ 2.x and GTK+ 3 in the same process is not supported
Trace/breakpoint trap (core dumped)

```

Current status: Unsolved

But sinnce it is a rutime problem so I am focusing on building tool ahead.

Merged ROS1 + ROS2 in camviz. No error in building it.

Working on refactoring the GUI part now.

Interesting solutions which I found for working ahead.

*  Replacement of ICEUTIL (time calculation) with Time in ROS http://wiki.ros.org/roscpp/Overview/Time

* Learning GTK + glade for building GUI tool

http://www.peteronion.org.uk/GtkExamples/GladeTutorials.html

https://people.gnome.org/~newren/tutorials/developing-with-gnome/html/ch02s02.html


GTK provides GUI toolkit for C and GTKMM is a C++ Interfaces for GTK+ and GNOME

Similar error: https://software.intel.com/en-us/forums/computer-vision/topic/802362
